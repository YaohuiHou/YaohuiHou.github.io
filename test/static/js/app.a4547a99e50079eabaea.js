webpackJsonp([1],{"+cgv":function(t,e){},"0E47":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},H9a3:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},r,!1,function(t){n("0E47")},null,null).exports,a=n("/ocq"),o=n("mvHQ"),u=n.n(o),c=n("c/Tr"),l=n.n(c),p=n("Xxa5"),d=n.n(p),f=n("exGp"),m=n.n(f),g=n("fZjL"),h=n.n(g),v=(n("woOf"),n("//Fk")),I=n.n(v),w=n("pFYg"),k=n.n(w),y=i.default.prototype.$isServer;!y&&document.addEventListener,!y&&document.removeEventListener;var b="undefined"==typeof window?"node":"browser";"node"!==b&&/MicroMessenger/gi.test(window.navigator.userAgent),"node"!==b&&/qyer\/|lastminute\/|qyer-guideapp\/|planer\//gi.test(window.navigator.userAgent);var _=void 0;i.default.prototype.$isServer||(_=n("cpGA"));var x={"image/jpg":{type:"jpg",isImg:!0},"image/jpeg":{type:"jpeg",isImg:!0},"image/png":{type:"png",isImg:!0},"image/gif":{type:"gif",isImg:!0},"audio/mp3":{type:"mp3",isImg:!1},"video/mp4":{type:"mp4",isImg:!1},"image/svg+xml":{type:"svg",isImg:!0},"application/javascript":{type:"js",isImg:!1},"text/css":{type:"css",isImg:!1}},E=[],F=void 0,A={name:"Qiuniu",data:function(){return{changeback:!1,isDragenter:!1,ALLOW_TYPES:x,token:"",tasks:E,imgsList:!1,tasksIndex:null}},computed:{accept:function(){return h()(this.ALLOW_TYPES).map(function(t){return t}).join(",")}},mounted:function(){var t=this;return m()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F=window.localStorage,E=JSON.parse(F.getItem("mock_server_upload"))||[],t.tasks=E;case 3:case"end":return e.stop()}},e,t)}))()},directives:{dom:{bind:function(t,e){var n=e.value;i.default.set(n,"el",t)}}},methods:{gotoPosition:function(t){window.scrollTo(0,t)},gotoFooter:function(){this.gotoPosition(document.body.scrollHeight)},getShowUrl:function(t){return t.isImg?t.url:t.url.replace(/http:\/\/|https:\/\//,"//")},ondragdrop:function(t,e){t.preventDefault(),this.isDragenter=!1,this.$parent.isDragenter=null;var n=[];0===(n=t.dataTransfer.files).length&&[].forEach.call(t.dataTransfer.files,function(t){n.push(t)},!1),this.tasksIndex=e||null,this.getQiniuToken(0,n)},onFileChange:function(t){this.getQiniuToken(1,t.target.files)},getFileKey:function(t){return Date.now().toString(36)+t.toString(36)+"_"+Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)},qiniuUplad:function(t){var e=this;return m()(d.a.mark(function n(){var i,r,s,a,o,u;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.getFileKey(t.size),r=e,s={useCdnDomain:!0},a={fname:i,params:{},mimeType:null},o={next:function(t){r.onUploadProgress(i,t.total.percent)},error:function(t){console.log("error"),console.error(t)},complete:function(t){r.onFileUploaded(i,t.key)}},e.onFilesAdded(t,i),u=_.upload(t,null,e.token,a,s),u.subscribe(o);case 8:case"end":return n.stop()}},n,e)}))()},getQiniuToken:function(t,e){var n,i=this,r=+new Date,s=Math.round(1e5*Math.random())+"-"+r;(n={url:"//topic.qyer.com/topic/uptoken?guid="+s,method:"GET",filterErrorCode:!1},new I.a(function(t,e){n.data=n.data||{},n.data.callback=n.data.callback||"jsonpcallback_"+(new Date).valueOf();var i=function(){var t=[];for(var e in n.data)t.push(e+"="+n.data[e]);return t.join("&")}();n.url+=-1===n.url.indexOf("?")?"?":"&",n.url+=i;var r=document.createElement("script");r.src=n.url,r.async=!0,r.type="text/javascript",window[n.data.callback]=function(i){if(window[n.data.callback]=null,delete window[n.data.callback],document.body.removeChild(r),r=null,"object"!==(void 0===i?"undefined":k()(i)))return e(new Error("格式错误，非标准 json"));t(i)},r.addEventListener("error",function(){e(new Error("网络错误."))}),document.body.appendChild(r)})).then(function(n){console.log(n,"jsonp"),0==n.status&&(i.token=n.data.content.token,console.log(n.data.request_id),t?l()(e).forEach(function(t){return i.qiniuUplad(t)}):l()(e).forEach(function(t){return i.ALLOW_TYPES[t.type]&&i.qiniuUplad(t)}))})},cleanList:function(){this.tasks=[],F.removeItem("mock_server_upload")},beforeCopy:function(t){1!==t.showType&&window.alert("请注意，复制的路径不是压缩地址!")},copy:function(t){t.el.select(),window.document.execCommand("Copy"),this.$message({message:"复制成功。",type:"success"})},removeTask:function(t){var e=this.tasks.findIndex(function(e){return e.id===t});this.tasks.splice(e,1),F.setItem("mock_server_upload",u()(this.tasks))},onFilesAdded:function(t,e){console.log(t,e);var n=x[t.type],i=!!n&&n.isImg;this.tasks.push({id:e,process:2,showType:1,url:"",isImg:i,type:t.type,width:0,height:0,image:0,name:t.name.substring(0,t.name.indexOf("."))}),this.isDragenter=!1},onRemoveFile:function(t){this.isDragenter=!1},onUploadProgress:function(t,e){var n=Math.min(99,e);this.tasks.find(function(e){return e.id===t}).process=n},onFileUploaded:function(t,e){var n=this.tasks.find(function(e){return e.id===t});if(n.process=100,n.url="//pic.qyer.com/"+e,null!=this.tasksIndex){var i=this.$parent.listArr[this.tasksIndex];i[this.$parent.parameterImg]=n.url,this.$set(this.$parent.listArr[this.tasksIndex],i),this.$parent.upDataList(),this.tasksIndex=null}}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qiniu"},[n("div",{staticClass:"btns"},[n("el-button",{staticClass:"btn-primary",attrs:{type:"success",id:"drag_btn"},on:{click:function(e){return t.$refs.uploadFile.click()}}},[t._v("点击上传图片")])],1),t._v(" "),n("input",{ref:"uploadFile",attrs:{multiple:"",type:"file",value:"上传",accept:"*"},on:{change:t.onFileChange}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"img-list-view"},[n("div",{staticClass:"upload_files",attrs:{id:"upload_files"}},[n("ul",t._l(t.tasks,function(t,e){return n("li",{key:e},[n("a",{attrs:{href:t.url,target:"_blank"}},[n("img",{attrs:{src:""+t.url,alt:""}})])])}),0)])])])],1)},staticRenderFns:[]};var j={components:{qiniuView:n("VU/8")(A,T,!1,function(t){n("i2TH")},"data-v-73735f7b",null).exports},data:function(){return{contrast:"",parameterImg:"",parameter:"",textarea:"",listArr:[],upimgView:!1,showFigureImg:!1,figureImg:"",isDragenter:null}},mounted:function(){this.isInnerIPFn()},methods:{isInnerIPFn:function(){var t=window.location.href;console.log("curPageUrl-0  "+t);t=(t=(t=t.replace(/(http|ftp|https|www):\/\//g,"")).replace(/\:+/g,".")).split("."),console.log(t);var e,n=t[0]+"."+t[1]+"."+t[2]+"."+t[3],i=this.getIpNum(n),r=this.getIpNum("10.0.0.0"),s=this.getIpNum("10.255.255.255"),a=this.getIpNum("172.16.0.0"),o=this.getIpNum("172.31.255.255"),u=this.getIpNum("192.168.0.0"),c=this.getIpNum("192.168.255.255"),l=this.getIpNum("127.0.0.0"),p=this.getIpNum("127.255.255.255");return e=this.isInner(i,r,s)||this.isInner(i,a,o)||this.isInner(i,u,c)||this.isInner(i,l,p),console.log("是否是内网:"+e),e},getIpNum:function(t){var e=t.split("."),n=256*parseInt(e[0])*256*256+256*parseInt(e[1])*256+256*parseInt(e[2])+parseInt(e[3]);return console.log(n),n},isInner:function(t,e,n){return t>=e&&t<=n},upDataList:function(){this.textarea=u()(this.listArr)},saveHtml:function(){this.listArr=JSON.parse(this.textarea)},InsertData:function(){var t=this;if(this.parameter){var e=JSON.parse(this.textarea);e.forEach(function(e){e[t.parameter]=""}),this.textarea=u()(e)}},showImage:function(t){this.showFigureImg=!0,this.figureImg=this.listArr[t][this.parameterImg]},hidenImage:function(t){this.showFigureImg=!1},addParameter:function(){var t=this;if(this.$refs.Qiuniu.tasks.length>0&&""!=this.parameterImg){var e=[],n=this.$refs.Qiuniu.tasks;if(this.contrast){var i={};n.forEach(function(t){i[t.name.trim()]=t.url+"?imageslim"}),this.listArr.forEach(function(n,r){var s=n.name.trim();i[s]&&(n[t.parameterImg]=i[s]),e.push(n)})}else this.listArr.forEach(function(i,r){n[r]&&(i[t.parameterImg]=n[r].url+"?imageslim"),e.push(i)});this.$set(this.listArr,e),this.upDataList()}}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json"},[n("div",{staticClass:"right"},[n("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"上传图片的名称所对应的参数名"},model:{value:t.contrast,callback:function(e){t.contrast=e},expression:"contrast"}}),t._v(" "),n("qiniuView",{ref:"Qiuniu"})],1)])},staticRenderFns:[]};var L=n("VU/8")(j,C,!1,function(t){n("H9a3")},null,null).exports;i.default.use(a.a);var $=new a.a({routes:[{path:"/",name:"jsonImg",component:L}]}),q=n("zL8q"),D=n.n(q),N=(n("tvR6"),n("G0J2")),S=n.n(N);n("3f40"),n("4qOc"),n("+cgv");i.default.use(S.a),i.default.use(D.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:$,components:{App:s},template:"<App/>"})},i2TH:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a4547a99e50079eabaea.js.map