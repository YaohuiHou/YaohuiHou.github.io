(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{362:function(t,s,a){"use strict";a.r(s);var n=a(1),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"javascript模块化01：commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript模块化01：commonjs","aria-hidden":"true"}},[t._v("#")]),t._v(" JavaScript模块化01：CommonJS")]),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[t._v("#")]),t._v(" 前言")]),a("p",[t._v("网站越来越复杂，js代码、js文件也越来越多，会遇到"),a("strong",[t._v("一些问题")]),t._v("：")]),a("ul",[a("li",[a("p",[t._v("文件依赖")])]),a("li",[a("p",[t._v("全局污染、命名冲突")])])]),a("p",[t._v("程序模块化包括：")]),a("ul",[a("li",[a("p",[t._v("日期模块")])]),a("li",[a("p",[t._v("数学计算模块")])]),a("li",[a("p",[t._v("日志模块")])]),a("li",[a("p",[t._v("登陆认证模块")])]),a("li",[a("p",[t._v("报表展示模块等。")])])]),a("p",[t._v("所有这些模块共同组成了程序软件系统。")]),a("p",[t._v("一次编写，多次使用，才是提高效率的核心。")]),a("h2",{attrs:{id:"模块化的理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化的理解","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化的理解")]),a("h3",{attrs:{id:"什么是模块化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是模块化","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是模块化")]),a("p",[a("strong",[t._v("概念")]),t._v("：将一个复杂的程序依据一定的规则（规范）封装成几个块（文件），并组合在一起。")]),a("p",[t._v("模块的内部数据、实现是私有的, 只是向外部暴露一些接口(方法)与外部其它模块通信。")]),a("p",[t._v("最早的时候，我们会把所有的代码都写在一个js文件里，那么，耦合性会很高（关联性强），不利于维护；而且会造成全局污染，很容易命名冲突。")]),a("h3",{attrs:{id:"模块化的好处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化的好处","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化的好处")]),a("ul",[a("li",[a("p",[t._v("避免命名冲突，减少命名空间污染")])]),a("li",[a("p",[t._v("降低耦合性；更好地分离、按需加载")])]),a("li",[a("p",[a("strong",[t._v("高复用性")]),t._v("：代码方便重用，别人开发的模块直接拿过来就可以使用，不需要重复开发类似的功能。")])]),a("li",[a("p",[a("strong",[t._v("高可维护性")]),t._v("：软件的声明周期中最长的阶段其实并不是开发阶段，而是维护阶段，需求变更比较频繁。使用模块化的开发，方式更容易维护。")])]),a("li",[a("p",[t._v("部署方便")])])]),a("h2",{attrs:{id:"模块化规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化规范")]),a("h3",{attrs:{id:"模块化规范的引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化规范的引入","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化规范的引入")]),a("p",[t._v("假设我们引入模块化，首先可能会想到的思路是：在一个文件中引入多个js文件。如下：")]),a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("zepto.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fastClick.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("util/login.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("util/base.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("util/city.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),a("p",[t._v("但是这样做会带来很多问题：")]),a("ul",[a("li",[a("p",[t._v("请求过多：引入十个js文件，就有十次http请求。")])]),a("li",[a("p",[t._v("依赖模糊：不同的js文件可能会相互依赖，如果改其中的一个文件，另外一个文件可能会报错。")])])]),a("p",[t._v("以上两点，最终导致："),a("strong",[t._v("难以维护")]),t._v("。")]),a("p",[t._v("于是，这就引入了模块化规范。")]),a("h3",{attrs:{id:"模块化的概念解读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化的概念解读","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化的概念解读")]),a("p",[t._v("模块化起源于 Node.js。Node.js 中把很多 js 打包成 package，需要的时候直接通过 require 的方式进行调用（CommonJS），这就是模块化的方式。")]),a("p",[t._v("那如何把这种模块化思维应用到前端来呢？这就产生了两种伟大的 js：RequireJS 和 SeaJS。")]),a("h3",{attrs:{id:"模块化规范-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化规范-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块化规范")]),a("p",[t._v("服务器端规范：")]),a("ul",[a("li",[a("a",{attrs:{href:"http://www.commonjs.org/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("CommonJS规范")])]),t._v("：是 Node.js 使用的模块化规范。")])]),a("p",[t._v("CommonJS 就是一套约定标准，不是技术。用于约定我们的代码应该是怎样的一种结构。")]),a("p",[t._v("浏览器端规范：")]),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/amdjs/amdjs-api",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("AMD规范")])]),t._v("：是 "),a("strong",[a("a",{attrs:{href:"http://requirejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("RequireJS")])]),t._v(" 在推广过程中对模块化定义的规范化产出。")])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("- 异步加载模块；\n\n- 依赖前置、提前执行：require([`foo`,`bar`],function(foo,bar){});   //也就是说把所有的包都 require 成功，再继续执行代码。\n\n- define 定义模块：define([`require`,`foo`],function(){return});\n")])]),a("ul",[a("li",[a("strong",[a("a",{attrs:{href:""}},[t._v("CMD规范")])]),t._v("：是 "),a("strong",[a("a",{attrs:{href:"http://seajs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SeaJS")])]),t._v(" 在推广过程中对模块化定义的规范化产出。淘宝团队开发。")])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n  同步加载模块；\n\n  依赖就近，延迟执行：require(./a) 直接引入。或者Require.async 异步引入。   //依赖就近：执行到这一部分的时候，再去加载对应的文件。\n\n  define 定义模块， export 导出：define(function(require, export, module){});\n")])]),a("p",[t._v("PS：面试时，经常会问AMD 和 CMD 的区别。")]),a("p",[t._v("另外，还有ES6规范。")]),a("p",[t._v("这篇文章，我们来讲一下"),a("code",[t._v("CommonJS")]),t._v("。")]),a("h2",{attrs:{id:"commonjs-的基本语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-的基本语法","aria-hidden":"true"}},[t._v("#")]),t._v(" CommonJS 的基本语法")]),a("h3",{attrs:{id:"commonjs-的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-的介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" CommonJS 的介绍")]),a("p",[a("a",{attrs:{href:"http://www.commonjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CommonJS")]),t._v("：是 Node.js 使用的模块化规范。")]),a("p",[t._v("也就是说，Node.js 就是基于 CommonJS 这种模块化规范来编写的。")]),a("p",[t._v("在 CommonJS 中，每个文件都可以当作一个模块：")]),a("ul",[a("li",[a("p",[t._v("在服务器端：模块的加载是运行时同步加载的。")])]),a("li",[a("p",[t._v("在浏览器端: 模块需要提前编译打包处理。首先，既然同步的，很容易引起阻塞；其次，浏览器不认识"),a("code",[t._v("require")]),t._v("语法，因此，需要提前编译打包。")])])]),a("h3",{attrs:{id:"暴露模块的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#暴露模块的方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 暴露模块的方式")]),a("p",[a("strong",[t._v("方式一")]),t._v("：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  module"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n")])]),a("p",[t._v("这个 value 可以是任意的数据类型。")]),a("p",[a("strong",[t._v("方式二")]),t._v("：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  exports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n")])]),a("p",[a("strong",[t._v("问题")]),t._v(": 暴露的模块到底是谁？")]),a("p",[a("strong",[t._v("答案")]),t._v("：暴露的本质是"),a("code",[t._v("exports")]),t._v("对象。【重要】")]),a("p",[t._v("比如，方式二可以理解成是，"),a("strong",[t._v("给 exports 对象添加属性")]),t._v("。")]),a("p",[t._v("PS：暴露的关键词是"),a("code",[t._v("exports")]),t._v("，不是"),a("code",[t._v("export")]),t._v("。")]),a("h3",{attrs:{id:"引入模块的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入模块的方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 引入模块的方式")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("require(xxx)\n")])]),a("p",[t._v("解释：")]),a("ul",[a("li",[a("p",[t._v("下载的第三方模块：xxx直接为模块名（包名）。")])]),a("li",[a("p",[t._v("自定义模块：xxx为模块文件路径")])])]),a("h2",{attrs:{id:"commonjs-在服务器端的实现举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-在服务器端的实现举例","aria-hidden":"true"}},[t._v("#")]),t._v(" CommonJS 在服务器端的实现举例")]),a("h3",{attrs:{id:"_1、初始化项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、初始化项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、初始化项目")]),a("p",[t._v("在工程文件中新建如下目录和文件：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("modules\n    | module1.js\n    | module2.js\n    | module3.js\n\napp.js\n")])]),a("p",[t._v("然后在根目录下新建如下命令：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  npm init\n")])]),a("p",[t._v("然后根据提示，依次输入如下内容：")]),a("ul",[a("li",[a("p",[a("strong",[t._v("包名")]),t._v("：可以自己起包名，也可以用默认的包名。注意，包名里不能有中文，不能有大写。")])]),a("li",[a("p",[a("strong",[t._v("版本")]),t._v("：可以用默认的版本 1.0.0，也可以自己修改包名。")])])]),a("p",[t._v("其他的参数，一路回车即可。效果如下：")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180410_1425.png",alt:""}})]),a("p",[t._v("于是，根目录下会自动生成"),a("code",[t._v("package.json")]),t._v("这个文件。点进去看一下：")]),a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"commonjs_node"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"app.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"smyhvae"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),a("h3",{attrs:{id:"_2、导入第三方包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、导入第三方包","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、导入第三方包")]),a("p",[a("code",[t._v("uniq")]),t._v("这个第三方包的作用是保证唯一性（我们拿它来举例）。我们在当前工程目录下，输入如下命令进行安装：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  npm install uniq\n")])]),a("p",[t._v("安装成功后，根目录下会自动生成相应的文件：")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180410_1450.png",alt:""}})]),a("p",[t._v("需要说明的是，我的node版本是 v8.10.0（v8以上），对应的 npm 版本是 v5.6.0，版本比较高，因此，当我输入完"),a("code",[t._v("npm install uniq")]),t._v("之后，"),a("code",[t._v("package.json")]),t._v("中就会自动添加"),a("code",[t._v("uniq")]),t._v("包的依赖：")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180410_1855.png",alt:""}})]),a("p",[t._v("如果有些童鞋的npm版本较低，就需要手动去添加依赖；另一种方式是，可以使用"),a("code",[t._v("npm install uniq --save")]),t._v("命令，这个多出来的"),a("code",[t._v("--save")]),t._v("就可以自动添加依赖。")]),a("p",[t._v("我们去"),a("a",{attrs:{href:"https://www.npmjs.com/package/uniq",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网")]),t._v("看一下"),a("code",[t._v("uniq")]),t._v("的用法：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" uniq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'uniq'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("uniq")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("//输出结果：[ 1, 2, 3, 5 ]")]),t._v("\n\n")])]),a("p",[t._v("可以看出，这个包可以起到数组去重的作用。")]),a("h3",{attrs:{id:"_3、自定义模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、自定义模块","aria-hidden":"true"}},[t._v("#")]),t._v(" 3、自定义模块")]),a("p",[t._v("（1）module1.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式一：module.exports = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//暴露一个对象出去")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'我是 module1'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//我们不能再继续写 module.exports = xxx。因为重新赋值，会把之前的赋值覆盖掉。")]),t._v("\n\n")])]),a("p",[t._v("（2）module2.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式一：module.exports = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//暴露一个函数出去")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'我是 module2'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("注意，此时暴露出去的 exports 对象 等价于整个函数。")]),a("p",[t._v("（3）module3.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式二：exports.xxx = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//可以往 export 对象中不断地添加属性，进行暴露")]),t._v("\n\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("foo1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'module3 中的 foo1 方法'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("foo2")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'module3 中的 foo2 方法'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("11")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),a("p",[t._v("（4）app.js：（将其他模块汇集到主模块）")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//将其他模块汇集到主模块")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" uniq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'uniq'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//引入时，第三方模块要放在自定义模块的上面")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module1 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./modules/module1'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module2 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./modules/module2'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module3 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./modules/module3'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//调用module1对象的方法")]),t._v("\nmodule1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//调用module2的函数")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("module2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("//注意，在定义时，module2对象等价于整个函数function。所以，module2()的意思是，直接调用了函数。")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//调用module3中的属性")]),t._v("\nmodule3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("uniq")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//将module3中的数组进行去重操作")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//打印数组去重后的结果")]),t._v("\n")])]),a("p",[t._v("这样的话，我们的代码就写完了。")]),a("p",[t._v("我们在命令行中输入"),a("code",[t._v("node app.js")]),t._v("，就可以把代码跑起来了。打印结果如下：")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("我是 module1\n我是 module2\nmodule3 中的 foo1 方法\nmodule3 中的 foo2 方法\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" 1, 11, 2, 3, 5 "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])]),a("h2",{attrs:{id:"commonjs-基于浏览器端的实现举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-基于浏览器端的实现举例","aria-hidden":"true"}},[t._v("#")]),t._v(" CommonJS 基于浏览器端的实现举例")]),a("h3",{attrs:{id:"_1、初始化项目-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、初始化项目-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、初始化项目")]),a("p",[t._v("在工程文件中新建如下目录和文件：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("js\n    dist //打包生成文件的目录\n    src //源码所在的目录\n      | module1.js\n      | module2.js\n      | module3.js\n      | app.js //应用主源文件\nindex.html    //因为CommonJS是基于浏览器端，js文件要跑在浏览器的页面上，所以要有这个html页面\n")])]),a("p",[t._v("然后在根目录下新建如下命令：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  npm init\n")])]),a("p",[t._v("然后根据提示，依次输入如下内容：")]),a("ul",[a("li",[a("p",[a("strong",[t._v("包名")]),t._v("：可以自己起包名，也可以用默认的包名。注意，包名里不能有中文，不能有大写。")])]),a("li",[a("p",[a("strong",[t._v("版本")]),t._v("：可以用默认的版本 1.0.0，也可以自己修改包名。")])])]),a("p",[t._v("其他的参数，一路回车即可。")]),a("p",[t._v("于是，根目录下会自动生成"),a("code",[t._v("package.json")]),t._v("这个文件。点进去看一下：")]),a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"commonjs_browser"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n")])]),a("h3",{attrs:{id:"_2、下载第三方包：browserify"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、下载第三方包：browserify","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、下载第三方包：Browserify")]),a("p",[t._v("这里需要用到"),a("a",{attrs:{href:"http://browserify.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browserify")]),t._v("这个工具进行编译打包。Browserify 称为 CommonJS 的浏览器端的打包工具。")]),a("p",[t._v("输入如下命令进行安装：（两个命令都要输入）")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("    npm install browserify "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("g          "),a("span",{attrs:{class:"token comment"}},[t._v("//全局")]),t._v("\n    npm install browserify "),a("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("save"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("dev  "),a("span",{attrs:{class:"token comment"}},[t._v("//局部。")]),t._v("\n")])]),a("p",[t._v("上面的代码中，"),a("code",[t._v("-dev")]),t._v("表示开发依赖。这里解释一下相关概念：")]),a("ul",[a("li",[a("p",[t._v("开发依赖：当前这个包，只在开发环境下使用。")])]),a("li",[a("p",[t._v("运行依赖：当前这个包，是在生产环境下使用。")])])]),a("h3",{attrs:{id:"_3、自定义模块-代码运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、自定义模块-代码运行","aria-hidden":"true"}},[t._v("#")]),t._v(" 3、自定义模块 & 代码运行")]),a("p",[t._v("（1）module1.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式一：module.exports = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//暴露一个对象出去")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'我是 module1'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//我们不能再继续写 module.exports = xxx。因为重新赋值，会把之前的赋值覆盖掉。")]),t._v("\n\n")])]),a("p",[t._v("（2）module2.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式一：module.exports = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//暴露一个函数出去")]),t._v("\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'我是 module2'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("注意，此时暴露出去的 exports 对象 等价于整个函数。")]),a("p",[t._v("（3）module3.js：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//暴露方式二：exports.xxx = value")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//可以往export对象中不断地添加属性，进行暴露")]),t._v("\n\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("foo1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'module3 中的 foo1 方法'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("foo2")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'module3 中的 foo2 方法'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("（4）app.js：（将其他模块汇集到主模块）")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module1 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./module1'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// ./ 指的是当前路径")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module2 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./module2'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" module3 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'./module3'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("module2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule3"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("p",[t._v("引入的路径解释：")]),a("ul",[a("li",[a("code",[t._v("./")]),t._v("是相对路径，指的是当前路径（app.js的当前路径是src）")])]),a("p",[t._v("到此，我们的主要代码就写完了。")]),a("p",[t._v("但是，如果我们直接在index.html中，像下面这样写，是不行的：（因为浏览器不认识 require 关键字）")]),a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ie=edge"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./js/src/app.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])]),a("p",[t._v("为了能够让index.html引入app.js，我们需要输入如下命令：")]),a("p",[t._v("打包处理js:")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    browserify js/src/app.js -o js/dist/bundle.js\n")])]),a("p",[t._v("然后在index.html中引入打包后的文件：")]),a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("js/dist/bundle.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),a("h2",{attrs:{id:"others"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#others","aria-hidden":"true"}},[t._v("#")]),t._v(" others")]),a("h3",{attrs:{id:"seajs-的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#seajs-的介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" SeaJS 的介绍")]),a("p",[t._v("SeaJS：一个基于CMD规范实现的模块化开发解决方案。")]),a("p",[t._v("作者：Alibaba 玉伯。")]),a("p",[t._v("官网："),a("a",{attrs:{href:"http://seajs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://seajs.org/")])]),a("p",[t._v("GitHub："),a("a",{attrs:{href:"https://github.com/seajs/seajs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/seajs/seajs")])]),a("p",[t._v("现在官网变成了："),a("a",{attrs:{href:"https://seajs.github.io/seajs/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://seajs.github.io/seajs/docs/")])]),a("p",[t._v("特性：")]),a("ul",[a("li",[a("p",[t._v("简单友好的模块定义规范。")])]),a("li",[a("p",[t._v("自然直观的代码组织方式。")])])]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180303_2107.png",alt:""}})]),a("h3",{attrs:{id:"requirejs（amd）、seajs（cdm）、commonjs、es6-的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirejs（amd）、seajs（cdm）、commonjs、es6-的对比","aria-hidden":"true"}},[t._v("#")]),t._v(" RequireJS（AMD）、SeaJS（CDM）、CommonJS、ES6 的对比")]),a("p",[t._v("1、RequireJS 和 AMD：")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180303_1653.png",alt:""}})]),a("p",[t._v("异步模块定义，特点是依赖前置。")]),a("p",[t._v("2、SeaJS 和 CMD：")]),a("p",[t._v("同步模块定义。")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// 所有模块都通过 define 来定义")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("define")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("funtion")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("require"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//通过 require 引入依赖")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" $ "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`jquery`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Spinning "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`./spinning`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("p",[t._v("3、CommonJS：")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180303_1701.png",alt:""}})]),a("p",[t._v("以上三个都是 ES5里面的规范。")]),a("p",[t._v("4、ES6：")]),a("p",[t._v("ES6的特性：export/import")]),a("p",[a("img",{attrs:{src:"http://img.smyhvae.com/20180303_1704.png",alt:""}})])])}],!1,null,null,null);s.default=o.exports}}]);